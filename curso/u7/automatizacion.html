---
layout: presentacion
title: Introducción a la automatización de tareas
tema: white
---
<section>
  <h2>Introducción a la automatización</h2>
  <p>
    <a href="http://albertomolina.wordpress.com">Alberto Molina Coballes</a> y
    <a href="http://www.josedomingo.org">José Domingo Muñoz Rodríguez</a>
  </p>
  <p>
    <a href="http://creativecommons.org/licenses/by-sa/3.0/">
      <img src="../u1/img/cc_by_sa.png" width="100px" border="0"/></a>
  </p>
  <p><small>Theme by: <a href="http://lab.hakim.se/reveal-js/#/">reveal.js</a></small></p>
</section>

<section>
  <section>
    <h2>Automatización de tareas</h2>
    
    <p>La automatización es, en informática, el conjunto de métodos que sirven para realizar tareas repetitivas en un ordenador. </p>
 
  </section>
  <section>
    <h2>Ejemplos de automatización</h2>
    <ul>
      <li>Orquestación: Despliegue automática de una infraestructura en el cloud.</li>
      <li>Configuración automática: Utilizar procesos automáticos para aprovisonar, configurar y gestionar el sistema informático.</li>
      
    </ul>
  </section>
  <section>
    <h2>¿Cómo podemos automatizar? (I)</h2>
    <ul>
      <li>Script</li>
        <ul>
          <li>Ventajas: Se puede probar, control de versiones, es replicable, ...</li>
          <li>Desventajas: Requiere pesencia de usuario, la replicaicón puede ser complicada, se puede quedar obsoleto...</li>
        </ul>
        <p>Con un script indicamos los pasos para que un sistema alcance un determinado estado. Ejemplo: lenguajes de script...</p>
  </section>
  <section>
    <h2>¿Cómo podemos automatizar? (II)</h2>
    <ul>
      
      <li>Herramientas específicas de automatización</li>
        <ul>
          <li>Temporalización: La tarea se puede programar.</li>
          <li>Replicabilidad: Las acciones deben funcionar el sistemas heterogéneos.</li>
          <li>Monitorización: Según la información obtenida del sistema se pueden ejecutar determinadas acciones.</li>
          <li>Ejemplos: puppet, chef, ansible, heat (openstack),...
        </ul>
        <p>Se indica el estado que queremos que tenga el sistema, y estas herramientas realizan las acciones necesarios para llegar a él.</p>
  </section>
</section>


 <section>
 <section>
        <h2>Ansible. Introducción</h2>
         <ul>
     <li>Ansible es una aplicación libre de orquestación escrita en python</li>
     <li>La primera versión se desarrolló en febrero de 2012 (!)
         </ul>
      </section>
      <section>
        <h2>Ansible. Introducción (2)</h2>
        <ul>
     <li>Ventajas frente a otro software de automatización:</li>
     <ul>
       <li>Muy fácil instalación</li>
       <li>Comunidad de desarrolladores muy activa</li>
       <li>Muy pocas dependencias</li>
       <li>Ideal para entornos pequeños y homogéneos</li>
       <li>No es necesario configurar nada en los clientes</li>
     </ul>
     <li>Inconvenientes:</li>
     <ul>
       <li>Más complejo en entornos muy heterogéneos</li>
       <li>Menos "recetas" desarrolladas previamente al ser muy nuevo</li>
     </ul>
         </ul>
        <p>Lo importante no es qué herramienta de gestión de la
        configuración utilizar. Lo importante es utilizar al menos una.</p>
    </section>
    <section>
      <h2>Ansible. Instalación</h2>
      <p>Para utilizar la última versión:</p>
      <pre>

# apt-get install python-pip python-dev
# pip install ansible
      </pre>
      <p><strong>Voila!</strong></p>
      
    </section>
    <section>
      <h2>Ansible. Playbooks</h2>
      <p>Las tareas a realizar por ansible se describen en formato yaml en ficheros denominados “playbooks”, que pueden incluir una o varias jugadas, por ejemplo:</p>
      
       <pre>  
         <code data-trim>
---
- name: Apache installation
  hosts: all
  sudo: True
  tasks:
  - name: Set proper sources.list
    copy: >
      src=files/etc/apt/sources.list
      dest=/etc/apt/sources.list
      owner=root
      mode=644
  - name: Ensure apache is installed (after updating)
    apt: pkg=apache2 update_cache=yes
         </code>
       </pre>
    </section>
    
    <section>
      <h2>Automatizar con Ansible</h2>
      <p>Si tenemos varias intancias, podríamos realizar las siguientes tareas de forma automática:</p>
      <ul>
        <li>Configurar la red</li>
        <li>Realizar las actualizaciones de software</li>
        <li>Instalar los paquetes del software que se va a utilizar</li>
        <li>Copiar los ficheros de configuración de plantillas previamente creadas</li>
        <li>Levantar o parar los servicios que se determinen</li>
        <li>Ejecutar cualquier tarea en cada una de las máquinas virtuales</li>
        <li>Dejar el entorno completamente operativo</li>
      </ul>
      
</section>
</section>
<section>
  <section>
    <h2> OpenStack Heat </h2>
    <p>Heat es el servicio de orquestación de OpenStack, nos permite gestionar recursos en nuestra infrestructura en la nube (instanicas, volúmenes, redes,...) de forma automática.</p>

  </section>
  <section>
  <section>
    <h2>Conceptos (I)</h2>
    <ul>
      <li>Stack: Es el conjunto de recutrsos que se van a crear con Heat (Instanicas, volúmenes, redes, subredes, puertos ...)</li>
      <li>Template: Sirve para definir los recursos del Stack y sus relaciones.</li>
      <li>Parámetros: Es una de las secciones del template, y en ella podemos pedir información al usuario (imagen, par de claves, ....)</li>
      <li>Resources: Siguiente sección del template donde definimos los recursos que vamos a añadir o modificar.</li>
    </ul>
  </section>   
  <section>
    <h2>Conceptos (II)</h2>
    <ul>
      <li>Output: Tercera seccióndel template, que nos permite indicar la información que tenemos que ofrecer al usuario (ip flotente,...)</li>
      <li>HOT (Heat Orchestration Template), el formato de los templates en heat, escrito en YAML.</li>
      <li>CFN (AWS CloudFormation), otro formato compatible con Heat, escrito en JSON.</li>
    </ul>
  </section>
</section>
  <section>
  <section>
    <h2>¿Cómo funciona Heat? (I)</h2>
    <ul>
      <li>En el template describimos la la infraestructura que queremos crear.</li>
      <li>Se describe cada uno de los <a href="http://docs.openstack.org/developer/heat/template_guide/index.html">recursos</a> que necesitamos.</li>
      <li>Heat ofrece un servicio de autoescalado, utilizanod la información que nos ofrece el componente <a href="https://wiki.openstack.org/wiki/Ceilometer">Ceilometer</a></li>
    </ul>
  </section>
    <section>
      <h2>¿Cómo funciona Heat? (II)</h2>
      <ul>
        <li>Se puede especificar también las relaciones que hay entre los recursos (volumen conectado a una instancia)</li>
        <li>Heat maneja el ciclo de vida completo de la infraestructura, cuando necesitas cambiarla, solo hay que modificar el template y realizar la actualización del stack.</li>
        <li>Heat gestiona infrestructura, pero los templates se pueden integrar con herramientas de automatización para realizar la confiuración de los recursos.</li>
    </section>
  </section>

</section>